<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
  <title>Anigrams</title>
  <meta name="generator" content="Jekyll v3.9.2" />
  <meta property="og:title" content="ü¶âü¶íüê¨ Anigrams ü¶úüêôüêê" />
  <meta property="og:locale" content="en_US" />
  <meta name="description" content="A daily word game" />
  <meta property="og:description" content="A daily word game" />
  <link rel="canonical" href="http://anigrams.us" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêê</text></svg>">
  <meta property="og:url" content="http://anigrams.us" />
  <meta property="og:site_name" content="ü¶âü¶íüê¨ Anigrams ü¶úüêôüêê" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary" />
  <meta property="twitter:title" content="ü¶âü¶íüê¨ Anigrams ü¶úüêôüêê" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,300">
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "description": "Anigrams",
      "headline": "Anigrams",
      "name": "Anigrams",
      "url": "http://anigrams.us"
    }
  </script>
  <!-- End Jekyll SEO tag -->
  <link rel="stylesheet" href="main.css">
  <!-- <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Your awesome title" /> -->
  <!-- Google Tag Manager -->
  <script>
    (function(w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
      });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
      j.async = true;
      j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-M4W79LJ');
  </script>
  <!-- End Google Tag Manager -->
</head>

<body ontouchstart="">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M4W79LJ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <header class="site-header" role="banner">

    <div class="header-wrapper">
      <a class="title" rel="author" href="/">Anigrams</a>
      <div class="flex-container">
        <button class="link-button" role="button" onClick="openModal('rulesModal')">Rules</button>
        <button id="yesterdayModalLink" class="link-button" role="button" onClick="openModal('yesterdayModal')">Yesterday</button>
        <button class="link-button" role="button" onClick="openModal('aboutModal')">About</button>
      </div>
    </div>
  </header>
  <main class="page-content" aria-label="Content">
    <div class="wrapper">
      <article class="post">
        <!-- <div id="incorrectFeedback" class="incorrectFeedback">Word not in dictionary</div> -->
        <div id="introInfo">Unscramble a word to reveal the next letter</div>
        <div id="timer"></div>
        <div id="solutionArea"></div>

        <!-- <div id="wordTarget"></div> -->
        <!-- <div class="divider"></div> -->
        <div id="tileArea"></div>

        <div class="emoji-button-menu" onClick="() => {}">
          <button id="clearButton" class="button-84" role="button" onClick="reset()">Clear</button>
          <button class="emoji-button" role="button" onClick="shuffle()">üîÑ</button>
          <button id="deleteButton" class="button-84" role="button" onClick="goback()">Delete</button>
        </div>
        <div class="emoji-button-menu" onClick="() => {}">
          <button id="hintButton" class="button-84" role="button" onClick="showNextLetter()">Show next letter</button>
        </div>
        <div id="hintsRemainingText">Hints remaining: <span id="hintsRemainingNumber">6</span></div>
        <div id="hintLettersText">Hint letters: <span id="hintsLetters"></span></div>
        <!-- <div id="prevAnswers"></div> -->

        <div id="congratsModal" class="modal">
          <div class="modal-content">
            <span class="close" onClick="closeCongratsModal()">&times;</span>
            <div class="column-flex">
              <div class="goat">üêê</div>
              <div class="goat-text">You reached the G.O.A.T. !!!</div>
            </div>
            <div id="shareableContent">
              <div class="share-content-row">
                <div>üêê</div>
                <div>ü¶â</div>
                <div>ü¶í</div>
                <div>üê¨</div>
                <div>ü¶ú</div>
                <div>üêô</div>
                <div>üêê</div>
              </div>
              <div class="share-content-row">
                <div>üêô</div>
                <div>Anigrams</div>
                <div>ü¶â</div>
              </div>
              <div class="share-content-row">
                <div>ü¶ú</div>
                <div id="shareNumber"></div>
                <div>ü¶í</div>
              </div>
              <div class="share-content-row">
                <div>üê¨</div>
                <div id="shareTime"></div>
                <div>üê¨</div>
              </div>
              <div class="share-content-row">
                <div>ü¶í</div>
                <div id="shareHints"></div>
                <div>ü¶ú</div>
              </div>
              <div class="share-content-row">
                <div>ü¶â</div>
                <div id="shareStreak"></div>
                <div>üêô</div>
              </div>
              <div class="share-content-row">
                <div>üêê</div>
                <div>üêô</div>
                <div>ü¶ú</div>
                <div>üê¨</div>
                <div>ü¶í</div>
                <div>ü¶â</div>
                <div>üêê</div>
              </div>
            </div>
            <div class="goat-modal-info-container">
              <div>
                <div>Next Anigram:</div>
                <div id="nextAnigram">XX</div>
              </div>
              <button id="shareButton" class="button-84" role="button" onClick="onClickShare()">Share</button>
            </div>

          </div>
        </div>

        <div id="rulesModal" class="modal">
          <div class="modal-content">
            <span class="close" onClick="closeModal('rulesModal')">&times;</span>
            <div class="rules-title">Rules</div>
            <div class="rules-info">
              <div>Unscramble a word to reveal the next letter.</div>
              <div>Each word must use every available letter exactly once.</div>
              <div>There may be multiple acceptable words at any given level, but you only need to enter one to advance.</div>
              <div>Feeling stuck? Use the "Show first letter" button for a hint, or the shuffle button to rearrange the letters.</div>
              <div>A new Anigrams puzzle will post every day at 9:30pm EST, 6:30pm PST</div>
            </div>
          </div>
        </div>
        <div id="yesterdayModal" class="modal">
          <div class="modal-content">
            <span class="close" onClick="closeModal('yesterdayModal')">&times;</span>
            <div id="yesterdayContent"></div>
          </div>
        </div>
        <div id="aboutModal" class="modal">
          <div class="modal-content">
            <span class="close" onClick="closeModal('aboutModal')">&times;</span>
            <div class="about-content">
              <div>Created by Adam Wagner</div>
              <div>Developed by Rafael Musa</div>
              <div>Gameplay development by Jacob Goldberg</div>
              <br>
              <div>Special thanks to Anna Goldberg Wagner</div>
              <br>
              <div>Think we missed a word? Want to share some feedback? Have other questions? Hit us up at <a href="mailto:info@anigrams.us">info@anigrams.us</a></div>
            </div>
          </div>
        </div>
      </article>

    </div>
  </main>
  <script>
    var solutions = `SITE TIES TIERS RITES TIRES TRIES SISTER RESIST RELISTS SLITHERS SHIRTLESS
SING SIGN GINS PINGS SPYING SPRINGY SPRAYING SPARINGLY
READ DEAR DARE AIRED RAIDER MARRIED ADMIRER DREAMIER REMAINDER
SUED USED DUES DUNES NUDES UNDIES INSURED SUNDRIES SIDEBURNS BURNSIDES
GETS GEST GENTS INGEST SIGNET TINGES SEATING TEASING SEDATING STEADING DESIGNATE
RECS CREST CORSET ESCORT SECTOR SCOOTER OUTSCORE COURTEOUS OUTSOURCE
TORE ROTE RETRO PORTER REPORT PRORATE PRAETOR OPERATOR CORPORATE
SEED DEES SPEED DEEPS ESPIED PRESIDE PERISHED WHISPERED
NORI IRON NOIR INTRO NITRO RATION ORATING RIGATONI MIGRATION
REPS SPREE PEERS PESTER PRESET PETERS STEEPER PRETEENS PRETENSE REPRESENT PRESENTER REPENTERS
PICS CLIPS SPLICE PICKLES PRICKLES CLERKSHIP
IONS COINS ICONS SCION SONIC COUSIN SUCTION MISCOUNT COSTUMING
ODDS DOSED DODGES GODDESS GODSENDS DODGINESS
DIVE VIED IVIED	DIVIDE DIVINED DIVIDEND UNDIVIDED
GRIN RING GRAIN MARGIN ROAMING ORGANISM IGNORAMUS
TRUE TUNER NATURE CENTAUR UNCRATE UNTRACED UNDERACT UNCRATED UNCHARTED
GNAT TANG GRANT GRATIN RATING TARING RATTING RATTLING PRATTLING
REIN INERT INTER ORIENT PROTEIN POINTER ERUPTION IMPORTUNE
RARE RACER CAREER TERRACE CATERER RECRATE RETRACE RECREATE RACKETEER
SANE SEDAN DEANS ASCEND DANCES CANDIES DISTANCE SYNDICATE
LINE LIEN ALIEN FINALE INFLATE FILAMENT FULMINATE
CART ACTOR CAPTOR CARTOP APRICOT TROPICAL PICTORIAL
BRAS BARS BRATS BAREST BASTER BREAST BARTERS ARBITERS BARRISTER
SITS STIRS STAIRS SITARS STRAINS ARSONIST ASSERTION SENORITAS
REIN REIGN RINGED DINGER GRINNED RENDING ENDURING UNDERSIGN
CASE ACES SCALE LACES CASTLE CLEATS ELASTIC LACIEST CITADELS DIALECTS DISLOCATE
SERF REEFS FREES REFERS FERRETS REFOREST FORESTER DEFROSTER
THIN HINT NIGHT THING HATING HALTING LATHING LATCHING HATCHLING
TORE ROTE ORATE OATER ORNATE ATONER SENATOR TREASON ATONERS RESONATE STONEWARE
DATE ACTED CADET CARTED CRATED REDACT TRACED REDCOAT DEMOCRAT MOTORCADE`

    var solutionsArray = solutions.split("\n");

    var badWordsList =
      "ASSHOLE ASSHOLES BITCH BITCHES SHIT SHITS SHITTING SHITTER SHITTY SHITTIER BULLSHIT FUCK FUCKS FUCKED FUCKING FUCKER FUCKERS CUNT CUNTS CUNTY CUNTIES TITS TITTIES TITTY COCK COCKS DICK DICKED DICKS PUSSY PUSSIES PUNANI PUNANIS TWAT TWATS SPIC SPICS NIGGER NIGGERS NIPS SPICK SPICKS BEANER BEANERS CHINK CHINKS CHINKER CHINKERS NIGGA NIGGAS NEGRO NEGROS CHOLO CHOLOS GOOK GOOKS WOGS GYPS GIPS KIKE KIKES KYKE KYKES DYKE DYKES FAGS MICK MICKS NIGLET NIGLETS PIKEY PIKEYS PIKER PIKERS RAGHEAD RAGHEADS REDSKIN REDSKINS SHYLOCK SHYLOCKS TARBABY TARBABIES WETBACK WETBACKS WOPS WENCH WENCHES FLOOZY FLOOZIE FLOOZIES BIMBO BIMBOS SHEMALE SHEMALES SLUT SLUTS TRANNY TRANNIE TRANNIES WHORE WHORES WHORED COCKSUCKER COCKSUCKERS NIGS"
    var badWordsSet = new Set(badWordsList.split(" ").map((word) => word.toLowerCase()));

    // assuming start at 2022/08/21, 18:30:00, PDT, also ignore daylight savings, www.unixtimestamp.com
    var puzzleIndex = Math.floor((Date.now() - 1661131800000) / (1000 * 60 * 60 * 24)) % 30
    if (puzzleIndex === 0) {
      document.getElementById("yesterdayModalLink").remove();
      if (localStorage.getItem('lastSolved') !== "1") {
        localStorage.setItem('streak', 0);
      }
    }
    var solution = processSolution(solutionsArray[puzzleIndex]);
    var yesterdaySolution = processSolution(solutionsArray[Math.max(puzzleIndex - 1, 0)])
    var currentWord = "";
    var currentRound = 0;
    var textToShare = 0;
    var emojiMapping = [
      'ü¶â',
      'ü¶í',
      'üê¨',
      'ü¶ú',
      'üêô',
      'üêê',
    ]
    var successMessages = [
      "Hoo-ray!",
      "Neck-cellent!",
      "TeEEEEErrific!",
      "Caw-esome!",
      "Gr-eight!",
      "Maaa-arvelous",
    ]
    var hints = [0, 0, 0, 0, 0, 0];
    var startTime = Math.floor(Date.now() / 1000); //Get the starting time (right now) in seconds
    document.getElementById('hintsRemainingNumber').innerHTML = localStorage.getItem('hintsRemaining') || '6';
    if (localStorage.getItem('hintsRemaining') === '0') {
      document.getElementById('hintButton').disabled = true;
    }
    console.log(document.getElementById('hintLettersText'))
    document.getElementById('hintLettersText').style.display = 'none';

    function processSolution(solutionRow) {
      var processedSolution = [
        [],
        [],
        [],
        [],
        [],
        []
      ];
      var words = solutionRow.trim().split(" ");
      for (var i = 0; i < words.length; i++) {
        processedSolution[words[i].length - 4].push(words[i].toLowerCase());
      }
      return processedSolution;
    }

    function checkTime(i) {
      if (i < 10) {
        i = "0" + i
      }; // add zero in front of numbers < 10
      return i;
    }

    for (var i = 0; i < solution.length; i++) {
      var solutionRow = document.createElement('div');
      solutionRow.className = "solution-row";
      emojiDiv = document.createElement('div');
      emojiDiv.className = "emojiDiv";
      emojiDiv.innerText = emojiMapping[i];
      solutionRow.id = `solution-${i + 4}`
      for (var j = 0; j < solution[i][0].length; j++) {
        var solutionSlot = document.createElement('div');
        solutionSlot.className = "solution-slot";
        // if (i === 0 && j === 0) {
        //   solutionSlot.classList.add("active-solution-slot")
        // }
        solutionRow.appendChild(solutionSlot);
      }
      solutionRow.appendChild(emojiDiv)
      document.getElementById('solutionArea').appendChild(solutionRow);


      var yesterdayRow = document.createElement('div');
      yesterdayRow.className = "solution-row";
      yesterdayEmojiDiv = document.createElement('div');
      yesterdayEmojiDiv.className = "emojiDiv";
      yesterdayEmojiDiv.innerText = emojiMapping[i];
      // yesterdayRow.id = `solution-${i + 4}`
      for (var j = 0; j < yesterdaySolution[i][0].length; j++) {
        var yesterdaySlot = document.createElement('div');
        yesterdaySlot.className = "solution-slot yesterday-slot";
        yesterdaySlot.innerText = yesterdaySolution[i][0][j];
        yesterdayRow.appendChild(yesterdaySlot);
      }
      yesterdayRow.appendChild(yesterdayEmojiDiv)
      document.getElementById('yesterdayContent').appendChild(yesterdayRow);
    }

    for (var i = 0; i < solution[0][0].length; i++) {
      var newTile = document.createElement('div');
      newTile.className = "tile";
      newTile.addEventListener('click', clickTile);
      newTile.innerText = solution[0][0][i];
      document.getElementById('tileArea').appendChild(newTile);
    }
    for (var i = 0; i < solution.length; i++) {
      emojiTile = document.createElement('div');
      flipper = document.createElement('div');
      front = document.createElement('div');
      back = document.createElement('div');
      emojiTile.className = "tile flip-container emoji-tile";
      if (i === solution.length - 1) {
        emojiTile.classList.add('goat-tile');
      }
      flipper.className = "flipper";
      front.className = "front";
      back.className = `back back-${i}`;
      front.innerText = emojiMapping[i];
      back.innerText = 'X';
      flipper.appendChild(front);
      flipper.appendChild(back);
      emojiTile.appendChild(flipper);
      document.getElementById('tileArea').appendChild(emojiTile)
    }
    // means we have saved data for today's puzzle
    if (Number(localStorage.getItem('currentDay')) === puzzleIndex + 1) {
      // document.querySelector('#solution-4').firstChild.classList.remove("active-solution-slot");
      currentSolution = localStorage.getItem('currentSolution').split('|')
      for (var i = 0; i < currentSolution.length - 1; i++) {
        for (var j = 0; j < currentSolution[i].length; j++) {
          document.querySelector(`#solution-${currentRound + 4} :nth-child(${j + 1})`).innerText = currentSolution[i][j];
        }
        currentRound++;
        if (i !== solution.length - 1) {
          var tileToFlip = document.querySelector('.emoji-tile')
          var newTile = document.createElement('div');
          newTile.className = "tile";
          newTile.addEventListener('click', clickTile);
          newTile.innerText = findNewLetter(currentRound);
          document.getElementById('tileArea').insertBefore(newTile, tileToFlip);
          tileToFlip.remove();
        }
      }
      for (var i = 0; i < localStorage.getItem('currLevelHints'); i++) {
        var index = [...document.getElementById('tileArea').children].map((child) => child.innerText.toLowerCase()).indexOf(solution[currentRound][0][i]);
        document.querySelector(`#tileArea :nth-child(${index + 1})`).click();
      }
      if (localStorage.getItem('currLevelHints') > 0) {
        document.getElementById('hintLettersText').style.display = 'block';
        document.getElementById('hintsLetters').innerHTML = solution[currentRound][0].substr(0, Number(localStorage.getItem('currLevelHints'))).toUpperCase();
      }
      // today's puzzle already solved -- show success modal
      if (Number(localStorage.getItem('lastSolved')) === puzzleIndex + 1) {
        timeShareText = localStorage.getItem('shareHints') > 0 ? localStorage.getItem('shareTime') : `‚≠ê${localStorage.getItem('shareTime')}‚≠ê`
        textToShare = `ü¶âü¶íüê¨ü¶úüêôüêê\r\nAnigrams ${puzzleIndex + 1}\r\n${timeShareText}\r\nStreak: ${localStorage.getItem('streak').toString()}\r\nü¶âü¶íüê¨ü¶úüêôüêê\r\nanigrams.us`;
        // textToShare =
        //   `üêêü¶âü¶íüê¨ü¶úüêôüêê\nüêô     Anigrams     ü¶â\nü¶ú        ${(puzzleIndex + 1).toString().padStart(3, '0')}        ü¶í\nüê¨    ${localStorage.getItem('shareTime')}    üê¨\nü¶í      Hints: ${localStorage.getItem('shareHints') || 0}      ü¶ú\nü¶â  Streak: ${localStorage.getItem('streak').toString().padStart(3, '0')}  üêô\nüêêüêôü¶úüê¨ü¶íü¶âüêê`
        document.getElementById('shareNumber').innerText = (puzzleIndex + 1).toString();
        document.getElementById('shareTime').innerText = localStorage.getItem('shareTime')
        document.getElementById('shareHints').innerText = `Hints: ${localStorage.getItem('shareHints') || 0}`;
        document.getElementById('shareStreak').innerText = `Streak: ${localStorage.getItem('streak').toString()}`
        document.getElementById('congratsModal').style.display = "block"
      }
      // we have a partial solution for a previous day and can clear it
    } else {
      localStorage.setItem('currentSolution', "");
      localStorage.setItem('currentTime', "");
      localStorage.setItem('shareHints', "");
      localStorage.setItem('shareTime', "");
      localStorage.setItem('currLevelHints', 0);
      localStorage.setItem('hintsRemaining', 6);
    }

    if (!Number(localStorage.getItem('currLevelHints')) && document.querySelector(`#solution-${currentRound + 4}`)) {
      document.querySelector(`#solution-${currentRound + 4}`).firstChild.classList.add("active-solution-slot");
    }

    let prevTime = Number(localStorage.getItem('currentTime')) || 0;

    function startTimeCounter() {
      var now = Math.floor(Date.now() / 1000); // get the time now
      var diff = now - startTime + prevTime; // diff in seconds between now and start
      localStorage.setItem('currentTime', diff);
      var m = Math.floor(diff / 60); // get minutes value (quotient of diff)
      var s = Math.floor(diff % 60); // get seconds value (remainder of diff)
      m = checkTime(m); // add a leading zero if it's single digit
      s = checkTime(s); // add a leading zero if it's single digit
      document.getElementById("timer").innerHTML = m + ":" + s; // update the element where the timer will appear

      var nextAnigram = (1661131800000 + ((puzzleIndex + 1) * 1000 * 24 * 60 * 60)) / 1000;
      var timeTilNext = nextAnigram - now;
      var mNext = Math.floor(timeTilNext / 60); // get minutes value (quotient of diff)
      var hNext = Math.floor(mNext / 60);
      mNext = mNext % 60;
      var sNext = Math.floor(timeTilNext % 60); // get seconds value (remainder of diff)
      hNext = checkTime(hNext); // add a leading zero if it's single digit
      mNext = checkTime(mNext); // add a leading zero if it's single digit
      sNext = checkTime(sNext); // add a leading zero if it's single digit
      document.getElementById('nextAnigram').innerHTML = `${hNext}:${mNext}:${sNext}`

      var t = setTimeout(startTimeCounter, 500); // set a timeout to update the timer
    }

    shuffle();
    startTimeCounter();

    function goback() {
      if (currentWord !== "") {
        var lastLetter = currentWord[currentWord.length - 1];
        currentWord = currentWord.slice(0, -1)
        document.querySelector(`#solution-${currentRound + 4} :nth-child(${currentWord.length + 1})`).innerText = "";
        document.querySelector(`#solution-${currentRound + 4} :nth-child(${currentWord.length + 2})`).classList.remove("active-solution-slot")
        document.querySelector(`#solution-${currentRound + 4} :nth-child(${currentWord.length + 1})`).classList.add("active-solution-slot")
        var usedTiles = document.querySelectorAll('.used-tile');
        var tile = [...usedTiles].filter((usedTile) => usedTile.innerText === lastLetter)[0];
        tile.classList.remove('used-tile');
      }
    }

    document.addEventListener('keydown', (e) => {
      if (!e.repeat) {
        if (e.key === 'Backspace') {
          goback();
          return;
        }
        var index = [...document.getElementById('tileArea').children].map((child) => child.classList.contains('used-tile') ? '?' : child.innerText.toLowerCase()).indexOf(e.key);
        if (index !== -1) {
          document.querySelector(`#tileArea :nth-child(${index + 1})`).click();
        }
      }
    });

    function onClickShare() {
      if (navigator.share) {
        navigator.share({
          text: textToShare,
        });
      } else {
        navigator.clipboard.writeText(textToShare)
        document.getElementById('shareButton').innerText = "Copied to clipboard";
        setTimeout(() => document.getElementById('shareButton').innerText = "Share", 1000);
      }
    }

    function clickTile(ev) {
      currentWord += ev.target.innerText;

      document.querySelector(`#solution-${currentRound + 4} :nth-child(${currentWord.length})`).innerText = ev.target.innerText;
      document.querySelector(`#solution-${currentRound + 4} :nth-child(${currentWord.length})`).classList.remove("active-solution-slot")
      if (currentWord.length !== currentRound + 4) {
        document.querySelector(`#solution-${currentRound + 4} :nth-child(${currentWord.length + 1})`).classList.add("active-solution-slot");
      }
      ev.target.classList.add("used-tile");
      // correct word
      if (solution.flat().includes(currentWord.toLowerCase()) && currentWord.length === currentRound + 4) {
        // new level means we're back to first letter for hints
        localStorage.setItem('currLevelHints', 0);
        document.getElementById('hintsLetters').innerHTML = "";
        document.getElementById('hintLettersText').style.display = 'none';
        document.getElementById('hintButton').disabled = true;

        // change active answer cell
        localStorage.setItem('currentDay', puzzleIndex + 1);
        localStorage.setItem('currentSolution', (localStorage.getItem('currentSolution') || "") + currentWord + "|")

        // deal with success message
        var feedbackContainer = document.createElement('div');
        feedbackContainer.className = "feedbackContainer";
        var feedbackMessage = document.createElement('div');
        feedbackMessage.innerText = successMessages[currentRound];
        feedbackMessage.className = "incorrectFeedback";
        feedbackMessage.classList.add("showIncorrectFeedback");
        feedbackContainer.appendChild(feedbackMessage);
        document.querySelector(`#solution-${currentRound + 4}`).lastChild.before(feedbackContainer);
        setTimeout(() => feedbackMessage.classList.remove("showIncorrectFeedback"), 500);
        setTimeout(() => {
          reset(true);
          currentRound++;
          if (currentRound === solution.length) {
            // solved yesterday
            if (Number(localStorage.getItem('lastSolved')) === puzzleIndex) {
              localStorage.setItem('streak', (Number(localStorage.getItem('streak')) || 0) + 1)
            } else {
              localStorage.setItem('streak', 1)
            }
            localStorage.setItem('lastSolved', puzzleIndex + 1)
            var now = Math.floor(Date.now() / 1000);
            var diff = now - startTime + prevTime;
            var totalMinutes = Math.floor(diff / 60);
            var h = Math.floor(totalMinutes / 60);
            var m = Math.floor(totalMinutes % 60);
            var s = Math.floor(diff % 60);
            h = checkTime(h)
            m = checkTime(m);
            s = checkTime(s);
            localStorage.setItem('shareTime', `${h}:${m}:${s}`)
            timeShareText = localStorage.getItem('shareHints') > 0 ? localStorage.getItem('shareTime') : `‚≠ê${localStorage.getItem('shareTime')}‚≠ê`
            textToShare =
              `ü¶âü¶íüê¨ü¶úüêôüêê\r\nAnigrams ${puzzleIndex + 1}\r\n${timeShareText}\r\nHints: ${localStorage.getItem('shareHints') || 0}\r\nStreak: ${localStorage.getItem('streak').toString()}\r\nü¶âü¶íüê¨ü¶úüêôüêê\r\nanigrams.us`;
            // textToShare =
            //   `üêêü¶âü¶íüê¨ü¶úüêôüêê\nüêô     Anigrams     ü¶â\nü¶ú        ${(puzzleIndex + 1).toString().padStart(3, '0')}        ü¶í\nüê¨    ${h}:${m}:${s}    üê¨\nü¶í      Hints: ${localStorage.getItem('shareHints') || 0}      ü¶ú\nü¶â  Streak: ${localStorage.getItem('streak').toString().padStart(3, '0')}  üêô\nüêêüêôü¶úüê¨ü¶íü¶âüêê`
            document.getElementById('shareNumber').innerText = (puzzleIndex + 1).toString();
            document.getElementById('shareTime').innerText = `${h}:${m}:${s}`
            document.getElementById('shareHints').innerText = `Hints: ${localStorage.getItem('shareHints') || 0}`
            document.getElementById('shareStreak').innerText = `Streak: ${localStorage.getItem('streak').toString()}`
            document.querySelector('.goat-tile').classList.add('goat-tile-grow');
            setTimeout(() => document.getElementById('congratsModal').style.display = "block", 1200);
            return;
          }
          document.querySelector(`#solution-${currentRound + 4}`).firstChild.classList.add("active-solution-slot");
          var tileToFlip = document.querySelector('.emoji-tile')
          tileToFlip.firstChild.children[1].innerText = findNewLetter(currentRound);
          setTimeout(() => {
            tileToFlip.firstChild.classList.add("flip");
          }, 500);
          setTimeout(() => {
            var newTile = document.createElement('div');
            newTile.className = "tile";
            newTile.addEventListener('click', clickTile);
            newTile.innerText = findNewLetter(currentRound);
            document.getElementById('tileArea').insertBefore(newTile, tileToFlip);
            tileToFlip.remove();
            if (localStorage.getItem('hintsRemaining') !== '0') {
              document.getElementById('hintButton').disabled = false;
            }
          }, 900);
        }, 0)
      }
      // incorrect word
      else if (currentWord.length === currentRound + 4) {
        var feedbackContainer = document.createElement('div');
        feedbackContainer.className = "feedbackContainer";
        var feedbackMessage = document.createElement('div');
        feedbackMessage.innerText = "Invalid word";
        feedbackMessage.className = "incorrectFeedback";
        feedbackMessage.classList.add("showIncorrectFeedback");
        feedbackContainer.appendChild(feedbackMessage);
        document.querySelector(`#solution-${currentRound + 4}`).lastChild.before(feedbackContainer);
        setTimeout(() => feedbackMessage.classList.remove("showIncorrectFeedback"), 500);
        setTimeout(() => {
          reset();
          document.querySelector(`#solution-${currentRound + 4}`).lastChild.previousSibling.remove();
          document.querySelector(`#solution-${currentRound + 4}`).firstChild.classList.add("active-solution-slot");
        }, 700);
      }
    }

    function showNextLetter() {
      var prevHintsRemaining = document.getElementById("hintsRemainingNumber").innerHTML;
      document.getElementById("hintsRemainingNumber").innerHTML = prevHintsRemaining - 1;
      localStorage.setItem('currLevelHints', Number(localStorage.getItem('currLevelHints') || 0) + 1);
      localStorage.setItem('hintsRemaining', prevHintsRemaining - 1);
      localStorage.setItem('currentDay', puzzleIndex + 1);
      var lettersToShow = Number(localStorage.getItem('currLevelHints'));
      document.getElementById('hintsLetters').innerHTML = solution[currentRound][0].substr(0, lettersToShow).toUpperCase();
      document.getElementById('hintLettersText').style.display = 'block';
      if (currentWord.toLowerCase() === solution[currentRound][0].substr(0, lettersToShow).toLowerCase()) {
        return;
      }
      reset()
      for (var i = 0; i < lettersToShow; i++) {
        var index = [...document.getElementById('tileArea').children].map((child) => child.innerText.toLowerCase()).indexOf(solution[currentRound][0][i]);
        document.querySelector(`#tileArea :nth-child(${index + 1})`).click();
      }
      if (prevHintsRemaining === "1") {
        document.getElementById('hintButton').disabled = true;
      }
    }

    function showFirstLetter() {
      if (hints[currentRound] === 0) {
        hints[currentRound] = 1;
        // save hints to local storage
        localStorage.setItem('shareHints', Number(localStorage.getItem('shareHints') || 0) + 1);
      }
      if (currentWord.toLowerCase() === solution[currentRound][0][0].toLowerCase()) {
        return;
      }
      reset();
      var index = [...document.getElementById('tileArea').children].map((child) => child.innerText.toLowerCase()).indexOf(solution[currentRound][0][0]);
      document.querySelector(`#tileArea :nth-child(${index + 1})`).click();
    }

    function findNewLetter(round) {
      oldLetters = solution[round - 1][0].split('').sort().join('');
      newLetters = solution[round][0].split('').sort().join('');
      for (var i = 0; i < oldLetters.length; i++) {
        if (oldLetters[i] !== newLetters[i]) {
          return newLetters[i];
        }
      }
      return newLetters[newLetters.length - 1];
    }

    function reset(preserveWord = false) {
      [...document.querySelectorAll('.used-tile')].map((usedTile) => {
        usedTile.classList.remove('used-tile');
      });
      document.querySelector(`#solution-${currentRound + 4} :nth-child(${currentWord.length + 1})`).classList.remove("active-solution-slot");
      currentWord = "";
      if (!preserveWord) {
        [...document.querySelectorAll(`#solution-${currentRound + 4} .solution-slot`)].map((child) => child.innerText = "");
        document.querySelector(`#solution-${currentRound + 4}`).firstChild.classList.add("active-solution-slot");
      }
    }

    function shuffle() {
      var tiles = document.getElementById('tileArea');
      while (true) {
        for (var i = currentRound + 4; i >= 0; i--) {
          tiles.insertBefore(tiles.children[Math.random() * i | 0], tiles.children[currentRound + 4]);
        }
        const randomArrangement = [...tiles.children].slice(0, currentRound + 4).map((child) => child.innerText).join('').toLowerCase();
        if (!solution.flat().includes(randomArrangement) && !badWordsSet.has(randomArrangement)) {
          break;
        }
      }
    }

    function closeCongratsModal() {
      document.getElementById("congratsModal").style.display = "none";
      document.querySelector('.goat-tile').remove();
    }

    function closeModal(modalId) {
      document.getElementById(modalId).style.display = "none";
    }

    function openModal(modalId) {
      document.getElementById(modalId).style.display = "block";
    }
  </script>
</body>

</html>